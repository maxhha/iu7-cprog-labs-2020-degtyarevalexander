        -:    0:Source:delete_template.c
        -:    1:#include <string.h>
        -:    2:#include "common.h"
        -:    3:#include <stdio.h>
        -:    4:
        -:    5:/* Params:
        -:    6: *   TYPE - file / array
        -:    7: *   IN_TYPE - FILE * / struct Student *
        -:    8:**/
        -:    9:
        -:   10:#ifdef TYPE
        -:   11:#ifdef IN_TYPE
        -:   12:
        -:   13:#include "templates.h"
        -:   14:
        8:   15:int TEMPLATE(delete, TYPE) (IN_TYPE students_in, IN_TYPE students_out, int n)
        -:   16:{
        -:   17:    struct Student a;
        8:   18:    double sum = 0;
        -:   19:
       26:   20:    for (int i = 0; i < n; i++)
        -:   21:    {
       18:   22:        a = TEMPLATE(get_from, TYPE) (students_in, i);
       18:   23:        sum += a.marks[0];
       18:   24:        sum += a.marks[1];
       18:   25:        sum += a.marks[2];
       18:   26:        sum += a.marks[3];
        -:   27:    }
        -:   28:
        8:   29:    double mean = sum / n;
        8:   30:    int k = 0;
        -:   31:
       26:   32:    for (int i = 0; i < n; i++)
        -:   33:    {
       18:   34:        a = TEMPLATE(get_from, TYPE) (students_in, i);
       18:   35:        if (a.marks[0] + a.marks[1] + a.marks[2] + a.marks[3] >= mean)
        -:   36:        {
       12:   37:            TEMPLATE(set_in, TYPE) (students_out, a, k);
       12:   38:            k += 1;
        -:   39:        }
        -:   40:    }
        -:   41:
        8:   42:    return k;
        -:   43:}
        -:   44:
        -:   45:#endif // IN_TYPE
        -:   46:#endif // TYPE
