        -:    0:Source:main.c
        -:    0:Graph:main.gcno
        -:    0:Data:main.gcda
        -:    0:Runs:5
        -:    0:Programs:1
        -:    1:#include <stdio.h>
        -:    2:#include <stdlib.h>
        -:    3:
        -:    4:#define MAX_ARRAY_SIZE 10
        -:    5:#define OK 0
        -:    6:#define INPUT_LEN_ERR 1
        -:    7:#define INPUT_ELEMENTS_ERR 2
        -:    8:#define PROCESS_ERR 3
        -:    9:
        5:   10:int scanf_array(int *a, int *len)
        -:   11:{
        5:   12:    printf("Enter array length:\n");
        5:   13:    int rc = scanf("%d", len);
        -:   14:
        5:   15:    if (rc != 1 || *len <= 0 || *len > MAX_ARRAY_SIZE)
        -:   16:    {
        1:   17:        return INPUT_LEN_ERR;
        -:   18:    }
        -:   19:
        4:   20:    printf("Enter array elements:\n");
        -:   21:
       11:   22:    for (int i = 0; i < *len; i++)
        -:   23:    {
        8:   24:        rc = scanf("%d", a + i);
        -:   25:
        8:   26:        if (rc != 1 || rc == EOF)
        -:   27:        {
        1:   28:            return INPUT_ELEMENTS_ERR;
        -:   29:        }
        -:   30:    }
        3:   31:    return OK;
        -:   32:}
        -:   33:
        2:   34:void print_array(int *a, int n)
        -:   35:{
        4:   36:    for (int i = 0; i < n; i++)
        -:   37:    {
        2:   38:        printf("%d ", a[i]);
        -:   39:    }
        2:   40:    printf("\n");
        2:   41:}
        -:   42:
        7:   43:int is_palindrome(int x)
        -:   44:{
        7:   45:    x = abs(x);
        -:   46:
        7:   47:    int initial = x, reversed = 0;
        -:   48:
       27:   49:    while (x > 0)
        -:   50:    {
       13:   51:        reversed = reversed * 10 + x % 10;
       13:   52:        x /= 10;
        -:   53:    }
        -:   54:
        7:   55:    return reversed == initial;
        -:   56:}
        -:   57:
        3:   58:void filter_palindromes(int *a, int n, int *out_a, int *out_n)
        -:   59:{
        3:   60:    int j = 0;
       10:   61:    for (int i = 0; i < n; i++)
        -:   62:    {
        7:   63:        if (!is_palindrome(a[i]))
        -:   64:        {
        2:   65:            out_a[j++] = a[i];
        -:   66:        }
        -:   67:    }
        3:   68:    *out_n = j;
        3:   69:}
        -:   70:
        5:   71:int main(void)
        -:   72:{
        -:   73:    int a[MAX_ARRAY_SIZE], b[MAX_ARRAY_SIZE];
        -:   74:    int n_a, n_b, rc;
        -:   75:
        5:   76:    rc = scanf_array(a, &n_a);
        -:   77:
        5:   78:    if (rc == INPUT_LEN_ERR)
        -:   79:    {
        1:   80:        printf("Array size is invalid.\n");
        1:   81:        return rc;
        -:   82:    }
        4:   83:    else if (rc == INPUT_ELEMENTS_ERR)
        -:   84:    {
        1:   85:        printf("Oops! It was a bad element.\n");
        1:   86:        return rc;
        -:   87:    }
        3:   88:    else if (rc != OK)
        -:   89:    {
    #####:   90:        printf("Unknown code error %d.\n", rc);
    #####:   91:        return rc;
        -:   92:    }
        -:   93:
        3:   94:    filter_palindromes(a, n_a, b, &n_b);
        -:   95:
        3:   96:    if (n_b == 0)
        -:   97:    {
        1:   98:        printf("All elements are palindromes.\n");
        1:   99:        return PROCESS_ERR;
        -:  100:    }
        -:  101:
        2:  102:    print_array(b, n_b);
        -:  103:
        2:  104:    return OK;
        -:  105:}
